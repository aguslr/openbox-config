#
# These things are run when an Openbox X Session is started.
#

# Launch composite manager
pgrep -xu "$USER" compton >/dev/null || \
    compton -bcCG -o 0.2 -r 0 -l 5 -t 5

# Launch systray
pgrep -xu "$USER" stalonetray >/dev/null || stalonetray &

# Change screen timeout
# https://wiki.archlinux.org/index.php/Display_Power_Management_Signaling#Modifying_DPMS_and_screensaver_settings_using_xset
xset s 590 590
# Start xautolock daemon if login locally
if [ -z "$XRDP_SESSION" ]; then
	pgrep -xu "$USER" xautolock >/dev/null || \
	    xautolock -time 10 -resetsaver -detectsleep \
	    -locker "i3lock.sh -p 50 -de -I 5" &
fi

# Start udiskie for device automonting
pgrep -xu "$USER" udiskie >/dev/null || udiskie &

# Set volume to 50%
amixer -q sset Master 50%

# Start gxkb applet
gxkb &
# Start Pidgin
pidgin &
# Start Empathy
empathy --start-hidden &
# Start Tox client
qtox &
# Start Workrave
workrave &

# Set background
hsetroot -solid '#666666'
nitrogen --restore

# Launch panel
tint2 &

# Open some windows
[ -e "$HOME/.tmux/sessions/monitor.sh" ] && \
    urxvtc -name Monitor -e sh -c "sleep 1; $HOME/.tmux/sessions/monitor.sh && exit"

# vim: set ft=sh :
